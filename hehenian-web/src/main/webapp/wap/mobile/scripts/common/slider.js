(function(i,p,g){var o=p.createElement("div");var q=["webkit","moz","o","ms"];var s={};var m=b.support={};var u=false;var d=5;var h=55;var l=null;m.transform3d=v(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]);m.transform=v(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]);m.transition=v(["transitionProperty","WebkitTransitionProperty","MozTransitionProperty","OTransitionProperty","msTransitionProperty"]);m.addEventListener="addEventListener" in i;m.mspointer=i.navigator.msPointerEnabled;m.cssAnimation=(m.transform3d||m.transform)&&m.transition;var j=["touch","mouse"];var a={start:{touch:"touchstart",mouse:"mousedown"},move:{touch:"touchmove",mouse:"mousemove"},end:{touch:"touchend",mouse:"mouseup"}};if(m.addEventListener){p.addEventListener("gesturestart",function(){u=true});p.addEventListener("gestureend",function(){u=false})}function b(w,x){return(this instanceof b)?this.init(w,x):new b(w,x)}b.prototype.init=function(x,y){var w=this;w.element=x;if(typeof x==="string"){w.element=p.querySelector(x)}if(!w.element){throw new Error("element not found")}if(m.mspointer){w.element.style.msTouchAction="pan-y"}y=y||{};w.auto=(y.auto===g)?false:y.auto;w.interval=(y.interval===g)?5000:y.interval;w.current=(y.current===g)?"current":y.current;w.pointBar=(y.pointBar===g)?false:y.pointBar;w.distance=y.distance;w.maxPoint=y.maxPoint;w.disableTouch=(y.disableTouch===g)?false:y.disableTouch;w.disable3d=(y.disable3d===g)?false:y.disable3d;w.transitionDuration=(y.transitionDuration===g)?"350ms":y.transitionDuration+"ms";w.currentPoint=0;w.currentX=0;w.animation=false;w.use3d=m.transform3d;if(w.disable3d===true){w.use3d=false}if(m.cssAnimation){w._setStyle({transitionProperty:t("transform"),transitionTimingFunction:"cubic-bezier(0,0,0.25,1)",transitionDuration:"0ms",transform:w._getTranslate(0)})}else{w._setStyle({position:"relative",left:"0px"})}w.refresh();j.forEach(function(z){w.element.addEventListener(a.start[z],w,false)});if(w.auto){w.startRun()}if(w.pointBar){w.showPointer()}return w};b.prototype.showPointer=function(){var w=this;var y=w.element;var z=p.createElement("div");z.className="slider-pointer";var A="";for(var x=0;x<=w._maxPoint;x++){A+="<span class='"+(x==w.currentPoint?w.current:"")+"'></span>"}z.innerHTML=A;y.parentNode.appendChild(z);w.pointer=z};b.prototype.setPointer=function(){var w=this;if(w.pointer){var y=w.pointer.querySelectorAll("span");for(var x=0;x<y.length;x++){if(x==w.currentPoint){y[x].className=w.current}else{y[x].className=""}}}};b.prototype.startRun=function(){var w=this;l=setInterval(function(){if(w._maxPoint==w.currentPoint){w.moveToPoint(0);return}w.toNext()},w.interval)};b.prototype.stopRun=function(){if(l){clearInterval(l)}};b.prototype.handleEvent=function(x){var w=this;switch(x.type){case a.start.touch:w._touchStart(x,"touch");break;case a.start.mouse:w._touchStart(x,"mouse");break;case a.move.touch:w._touchMove(x,"touch");break;case a.move.mouse:w._touchMove(x,"mouse");break;case a.end.touch:w._touchEnd(x,"touch");break;case a.end.mouse:w._touchEnd(x,"mouse");break;case"click":w._click(x);break}};b.prototype.refresh=function(){var w=this;w._maxPoint=(w.maxPoint===g)?(function(){var B=w.element.childNodes,z=-1,y=0,x=B.length,A;for(;y<x;y++){A=B[y];if(A.nodeType===1){z++}}return z})():w.maxPoint;if(w.distance===g){if(w._maxPoint<0){w._distance=0}else{w._distance=w.element.scrollWidth/(w._maxPoint+1)}}else{w._distance=w.distance}w._maxX=-w._distance*w._maxPoint;w.moveToPoint()};b.prototype.hasNext=function(){var w=this;return w.currentPoint<w._maxPoint};b.prototype.hasPrev=function(){var w=this;return w.currentPoint>0};b.prototype.toNext=function(w){var x=this;if(!x.hasNext()){return}x.moveToPoint(x.currentPoint+1,w)};b.prototype.toPrev=function(w){var x=this;if(!x.hasPrev()){return}x.moveToPoint(x.currentPoint-1,w)};b.prototype.moveToPoint=function(x,w){var y=this;w=w===g?y.transitionDuration:w+"ms";var z=y.currentPoint;if(x===g){x=y.currentPoint}if(x<0){y.currentPoint=0}else{if(x>y._maxPoint){y.currentPoint=y._maxPoint}else{y.currentPoint=parseInt(x,10)}}if(m.cssAnimation){y._setStyle({transitionDuration:w})}else{y.animation=true}y._setX(-y.currentPoint*y._distance,w);if(z!==y.currentPoint){y._triggerEvent("fsmoveend",true,false);y._triggerEvent("fspointmove",true,false)}y.setPointer()};b.prototype._setX=function(y,w){var z=this;z.currentX=y;if(m.cssAnimation){z.element.style[s.transform]=z._getTranslate(y)}else{if(z.animation){z._animate(y,w||z.transitionDuration)}else{z.element.style.left=y+"px"}}};b.prototype._touchStart=function(z,y){var w=this;w.stopRun();if(w.disableTouch||w.scrolling||u){return}w.element.addEventListener(a.move[y],w,false);p.addEventListener(a.end[y],w,false);var x=z.target.tagName;if(y==="mouse"&&x!=="SELECT"&&x!=="INPUT"&&x!=="TEXTAREA"&&x!=="BUTTON"){z.preventDefault()}if(m.cssAnimation){w._setStyle({transitionDuration:"0ms"})}else{w.animation=false}w.scrolling=true;w.moveReady=false;w.startPageX=r(z,"pageX");w.startPageY=r(z,"pageY");w.basePageX=w.startPageX;w.directionX=0;w.startTime=z.timeStamp;w._triggerEvent("fstouchstart",true,false)};b.prototype._touchMove=function(x,C){var E=this;if(!E.scrolling||u){return}var A=r(x,"pageX");var z=r(x,"pageY");var D;var w;if(E.moveReady){x.preventDefault();D=A-E.basePageX;w=E.currentX+D;if(w>=0||w<E._maxX){w=Math.round(E.currentX+D/3)}E.directionX=D===0?E.directionX:D>0?-1:1;var y=!E._triggerEvent("fstouchmove",true,true,{delta:D,direction:E.directionX});if(y){E._touchAfter({moved:false,originalPoint:E.currentPoint,newPoint:E.currentPoint,cancelled:true})}else{E._setX(w)}}else{var B=k(E.startPageX,E.startPageY,A,z);if(B.z>d){if(f(B)>h){x.preventDefault();E.moveReady=true;E.element.addEventListener("click",E,true)}else{E.scrolling=false}}}E.basePageX=A};b.prototype._touchEnd=function(z,y){var x=this;x.element.removeEventListener(a.move[y],x,false);p.removeEventListener(a.end[y],x,false);if(!x.scrolling){return}var w=-x.currentX/x._distance;w=(x.directionX>0)?Math.ceil(w):(x.directionX<0)?Math.floor(w):Math.round(w);if(w<0){w=0}else{if(w>x._maxPoint){w=x._maxPoint}}x._touchAfter({moved:w!==x.currentPoint,originalPoint:x.currentPoint,newPoint:w,cancelled:false});x.moveToPoint(w)};b.prototype._click=function(x){var w=this;x.stopPropagation();x.preventDefault()};b.prototype._touchAfter=function(x){var w=this;w.scrolling=false;w.moveReady=false;setTimeout(function(){w.element.removeEventListener("click",w,true)},200);w._triggerEvent("fstouchend",true,false,x);w.startRun()};b.prototype._setStyle=function(y){var w=this;var x=w.element.style;for(var z in y){e(x,z,y[z])}};b.prototype._animate=function(D,B){var G=this;var z=G.element;var y=+new Date();var E=parseInt(z.style.left,10);var F=D;var A=parseInt(B,10);var C=function(H,x){return -(H/=x)*(H-2)};var w=setInterval(function(){var H=new Date()-y;var I,x;if(H>A){clearInterval(w);x=F}else{I=C(H,A);x=I*(F-E)+E}z.style.left=x+"px"},10)};b.prototype.destroy=function(){var w=this;j.forEach(function(x){w.element.removeEventListener(a.start[x],w,false)})};b.prototype._getTranslate=function(w){var y=this;return y.use3d?"translate3d("+w+"px, 0, 0)":"translate("+w+"px, 0)"};b.prototype._triggerEvent=function(z,x,w,B){var y=this;var A=p.createEvent("Event");A.initEvent(z,x,w);if(B){for(var C in B){if(B.hasOwnProperty(C)){A[C]=B[C]}}}return y.element.dispatchEvent(A)};function r(w,x){return w.changedTouches?w.changedTouches[0][x]:w[x]}function v(w){return n(w,function(x){return o.style[x]!==g})}function e(x,z,y){var w=s[z];if(w){x[w]=y}else{if(x[z]!==g){s[z]=z;x[z]=y}else{n(q,function(A){var B=c(A)+c(z);if(x[B]!==g){s[z]=B;x[B]=y;return true}})}}}function t(x){if(o.style[x]!==g){return x}else{var w;n(q,function(y){var z=c(y)+c(x);if(o.style[z]!==g){w="-"+y+"-"+x;return true}});return w}}function c(w){return w.charAt(0).toUpperCase()+w.substr(1)}function n(y,z){for(var x=0,w=y.length;x<w;x++){if(z(y[x],x)){return true}}return false}function k(B,D,A,C){var w=Math.abs(B-A);var F=Math.abs(D-C);var E=Math.sqrt(Math.pow(w,2)+Math.pow(F,2));return{x:w,y:F,z:E}}function f(y){var x=y.y/y.z;var w=Math.acos(x);return 180/(Math.PI/w)}if(typeof exports=="object"){module.exports=b}else{if(typeof define=="function"&&define.amd){define(function(){return b})}else{i.Flipsnap=b}}})(window,window.document);